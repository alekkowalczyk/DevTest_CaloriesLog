
<div ng-hide="errorWrapper.error == ''" class="row">
    <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
        {{errorWrapper.error}}
    </div>
</div>
<div class="row">
    <div class="col-md-3">
        <div class="panel panel-primary margin0">
            <div class="panel-heading">
                <h3 class="panel-title hand-cursor" ng-click="filterClicked($event)">
                    <span>Filter</span>
                    <input type="checkbox" ng-checked="filter.isFilterActive" />
                </h3>
                
            </div>
            <div class="panel-body  margin0 padding0" collapse="!filter.isFilterActive">
                <div class="panel panel-info margin0 padding0">
                    <div class="panel-heading">
                        <h4 class="panel-title hand-cursor" ng-click="filterDateClicked()">
                            <span>Date</span>
                            <input type="checkbox" ng-checked="filter.isFilterDateActive" />
                        </h4>
                    </div>
                    <div class="panel-body" collapse="!filter.isFilterDateActive">

                        <label>From:</label>
                        <p class="input-group">
                            <input type="text" class="form-control" datepicker-popup="yyyy.MM.dd" ng-change="filter.isFilteredDataLoaded = false" ng-model="filter.dateFrom" is-open="openedFrom" datepicker-options="datePicker.dateOptions" ng-required="true" /><span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="datePicker.open($event)" id="from"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>

                        <label>To:</label>
                        <p class="input-group">
                            <input type="text" class="form-control" datepicker-popup="yyyy.MM.dd" ng-change="filter.isFilteredDataLoaded = false" ng-model=" filter.dateto" is-open="openedTo" datepicker-options="datePicker.dateOptions" ng-required="true" /><span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="datePicker.open($event)" id="to"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                    </div>
                </div>
                <div class="panel panel-info margin0 padding0">
                    <div class="panel-heading">
                        <h4 class="panel-title hand-cursor" ng-click="filterTimeClicked()">
                            <span>Time</span>
                            <input type="checkbox" ng-checked="filter.isFilterTimeActive" />
                        </h4>
                    </div>
                    <div class="panel-body" collapse="!filter.isFilterTimeActive">
                        <label>From:</label><timepicker-pop input-time="filter.timeFrom" ng-model="filter.timeFrom" class="input-group" disabled="false"
                  show-meridian='false'></timepicker-pop>
                        <label>To:</label><timepicker-pop input-time="filter.timeTo" ng-model="filter.timeTo" class="input-group" disabled="false"
                  show-meridian='false'></timepicker-pop>
                    </div>
                </div>
            </div>
        </div>
        <button class="btn btn-block margin-top-bottom5" type="submit" data-ng-click="refreshMeals()">
            <span ng-hide="!filter.isFilteredDataLoaded">
                <span class="glyphicon glyphicon-refresh margin5" aria-hidden="true"></span>Refresh
            </span>
            <span ng-hide ="filter.isFilteredDataLoaded">
                <span class="glyphicon glyphicon-filter margin5" aria-hidden="true"></span>Filter
            </span>
        </button>

    </div>

    <div class="col-md-7">
     
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Text</th>
                    <th>Calories</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="meal in meals">
                    <td>
                        {{ meal.dateTime | date: 'yyyy-MM-dd'}}
                    </td>
                    <td>
                        {{ meal.dateTime | date: 'HH:mm'}}
                    </td>
                    <td>
                        {{ meal.text }}
                    </td>
                    <td>
                        {{ meal.calories }}
                    </td>
                    <td>
                        <button class="btn btn-default btn-xs" ng-click="editMeal(meal)"><span class="glyphicon glyphicon-pencil margin5" aria-hidden="true"></span>Edit</button>
                        |
                        <button class="btn btn-default btn-xs" ng-click="deleteMeal(meal)"><span class="glyphicon glyphicon-trash margin5" aria-hidden="true"></span>Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="col-md-2">
        <button class="btn btn-block margin-top-bottom5" type="submit" data-ng-click="addMeal()">
            <span class="glyphicon glyphicon-plus margin5" aria-hidden="true"></span>Add
        </button>
    </div>
</div>
